<!DOCTYPE html>
<html>
<head>
  <title>test</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <style type="text/css">
    /*****************  reset.css  ********************/
    /*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css*/
    a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}
    article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}
    body{line-height:1}
    ol,ul{list-style:none}
    blockquote,q{quotes:none}
    blockquote:after,blockquote:before,q:after,q:before{content:'';content:none}
    table{border-collapse:collapse;border-spacing:0}
    html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
    body{margin:0}
    article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}
    audio,canvas,progress,video{display:inline-block;vertical-align:baseline}
    audio:not([controls]){display:none;height:0}
    [hidden],template{display:none}
    a{background-color:transparent}
    a:active,a:hover{outline:0}
    abbr[title]{border-bottom:1px dotted}
    b,strong{font-weight:700}
    dfn{font-style:italic}
    h1{font-size:2em;margin:.67em 0}
    mark{background:#ff0;color:#000}
    small{font-size:80%}
    sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
    sup{top:-.5em}
    sub{bottom:-.25em}
    img{border:0}
    svg:not(:root){overflow:hidden}
    figure{margin:1em 40px}
    hr{box-sizing:content-box;height:0}
    pre{overflow:auto}
    code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}
    button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}
    button{overflow:visible}
    button,select{text-transform:none}
    button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
    button[disabled],html input[disabled]{cursor:default}
    button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
    input{line-height:normal}
    input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}
    input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}
    input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}
    input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}
    fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
    legend{border:0;padding:0}
    textarea{overflow:auto}
    optgroup{font-weight:700}
    table{border-collapse:collapse;border-spacing:0}
    td,th{padding:0}

    .f-cb:after,
    .f-cbli li:after {
      display: block;
      clear: both;
      visibility: hidden;
      height: 0;
      overflow: hidden;
      content: ".";
    }
    .f-cb,
    .f-cbli li {
      zoom: 1;
    }
    .fr{
      float: right;
    }

    .ellipsis-1{
      overflow: hidden;
      text-overflow:ellipsis;
      white-space: nowrap;
    }
    .ellipsis-2{
      display: -webkit-box;
      -webkit-box-orient: vertical;
      -webkit-line-clamp: 2;
      overflow: hidden;
    }
    .ellipsis-3{
      display: -webkit-box;
      -webkit-box-orient: vertical;
      -webkit-line-clamp: 3;
      overflow: hidden;
    }

    .u-outer-cont {
      width: 300px;
      height: auto;
      margin: 0 auto;
      margin-top: 100px;
    }

    /* class="flex-box flex-justify-center flex-align-center" 垂直水平都居中布局 */

    /*************  flex 布局 水平、垂直居中  **************/
    .flex-box{
      -webkit-box-align: stretch;
      -ms-flex-align: stretch;
      align-items: stretch;
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
    }
    /* 水平居中 */
    .flex-justify-center{
      display: flex;
      -webkit-box-pack: center;
      -ms-flex-pack: center;
      justify-content: center;
    }
    /* 垂直居中 */
    .flex-align-center{
      display: flex;
      -webkit-box-align: center;
      -ms-flex-align: center;
      align-items: center;
    }
    /*************  frozenui border  **************/
    .ui-border-t {
      border-top: 1px solid #e0e0e0
    }

    .ui-border-b {
      border-bottom: 1px solid #e0e0e0
    }

    .ui-border-tb {
      border-top: #e0e0e0 1px solid;
      border-bottom: #e0e0e0 1px solid;
      background-image: none
    }

    .ui-border-l {
      border-left: 1px solid #e0e0e0
    }

    .ui-border-r {
      border-right: 1px solid #e0e0e0
    }

    .ui-border {
      border: 1px solid #e0e0e0
    }

    .ui-border-radius {
      border: 1px solid #e0e0e0;
      border-radius: 4px
    }

    @media screen and (-webkit-min-device-pixel-ratio: 2) {
      .ui-border-radius {
        position:relative;
        border: 0
      }

      .ui-border-radius:before {
        content: "";
        width: 200%;
        height: 200%;
        position: absolute;
        top: 0;
        left: 0;
        border: 1px solid #e0e0e0;
        -webkit-transform: scale(0.5);
        -webkit-transform-origin: 0 0;
        padding: 1px;
        -webkit-box-sizing: border-box;
        border-radius: 8px;
        pointer-events: none
      }
    }

    @media screen and (-webkit-min-device-pixel-ratio: 2) {
      .ui-border {
        position:relative;
        border: 0
      }

      .ui-border-t,.ui-border-b,.ui-border-l,.ui-border-r,.ui-border-tb {
        border: 0
      }

      .ui-border-t {
        background-position: left top;
        background-image: -webkit-gradient(linear,left bottom,left top,color-stop(0.5,transparent),color-stop(0.5,#e0e0e0),to(#e0e0e0))
      }

      .ui-border-b {
        background-position: left bottom;
        background-image: -webkit-gradient(linear,left top,left bottom,color-stop(0.5,transparent),color-stop(0.5,#e0e0e0),to(#e0e0e0))
      }

      .ui-border-t,.ui-border-b,.ui-border-tb {
        background-repeat: repeat-x;
        /*-webkit-background-size: 100% 1px;*/
        -webkit-background-size: 100% 2px
      }

      .ui-border-tb {
        background-image: -webkit-gradient(linear,left bottom,left top,color-stop(0.5,transparent),color-stop(0.5,#e0e0e0),to(#e0e0e0)),-webkit-gradient(linear,left top,left bottom,color-stop(0.5,transparent),color-stop(0.5,#e0e0e0),to(#e0e0e0));
        background-position: top,bottom
      }

      .ui-border-l {
        background-position: left top;
        background-image: -webkit-gradient(linear,right top,left top,color-stop(0.5,transparent),color-stop(0.5,#e0e0e0),to(#e0e0e0))
      }

      .ui-border-r {
        background-position: right top;
        background-image: -webkit-gradient(linear,left top,right top,color-stop(0.5,transparent),color-stop(0.5,#e0e0e0),to(#e0e0e0))
      }

      .ui-border-l,.ui-border-r {
        background-repeat: repeat-y;
        -webkit-background-size: 1px 100%
      }
      .ui-border:after {
        content: "";
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background-image: -webkit-gradient(linear,left bottom,left top,color-stop(0.5,transparent),color-stop(0.5,#e0e0e0),to(#e0e0e0)),-webkit-gradient(linear,left top,right top,color-stop(0.5,transparent),color-stop(0.5,#e0e0e0),to(#e0e0e0)),-webkit-gradient(linear,left top,left bottom,color-stop(0.5,transparent),color-stop(0.5,#e0e0e0),to(#e0e0e0)),-webkit-gradient(linear,right top,left top,color-stop(0.5,transparent),color-stop(0.5,#e0e0e0),to(#e0e0e0));
        -webkit-background-size: 100% 1px,1px 100%,100% 1px,1px 100%;
        background-size: 100% 1px,1px 100%,100% 1px,1px 100%;
        -webkit-background-size: 100% 1px,1px 100%,100% 1px,1px 100%;
        background-size: 100% 1px,1px 100%,100% 1px,1px 100%;
        background-repeat: no-repeat;
        background-position: top,right,bottom,left;
        padding: 1px;
        -webkit-box-sizing: border-box;
        z-index: 10;
        pointer-events: none
      }
    }


    .video-item {
      padding-bottom: 3px;
    }
    .yt-iframe-wrapper {
      width: 100%;
      position: relative;
      background-color: #000;
    }
    .control-bar {
      position: relative;
      width: 100%;
      height: 40px;
      box-sizing: border-box;
      padding: 0 12px;
      line-height: 40px;
    }
    .control-bar .source,
    .control-bar .time {
      display: inline-block;
      opacity: 0.5;
      font-size: 14px;
      color: #222222;
      letter-spacing: 0;
    }
    .control-bar .time {
      margin-left: 10px;
    }
    .control-bar .share,
    .control-bar .collection {
      display: inline-block;
      width: 24px;
      height: 24px;
      position: absolute;
      top: 8px;
      background-size: cover!important;
    }
    .control-bar .share {
      right: 12px;
      background: url("http://static.news.apuslauncher.com/upload/news/20170518164719e5eb1f3bb4.png");
    }
    .control-bar .collection {
      right: 56px;
      background: url("http://static.news.apuslauncher.com/upload/news/20170518164613ba694d10a7.png");
    }
    .cover-box{
      position: absolute;
      top:0;
      left: 0;
      z-index: 999;
      width: 100%;
      height: 100%;
      background-size: cover!important;
    }
    .cover-box .play-btn{
      position: absolute;
      left: 50%;
      top:50%;
      display: inline-block;
      width: 50px;
      height: 50px;
      margin-left: -25px;
      margin-top: -25px;
      background: url("http://static.news.apuslauncher.com/upload/news/20170519153016fea3cad30a.png");
      background-size: 50px 50px;
    }

    .rotateZ-90{
      transform: rotate(-90deg);
      -ms-transform: rotate(-90deg);
      -moz-transform: rotate(-90deg);
      -webkit-transform: rotate(-90deg);
      -o-transform: rotate(-90deg);
    }

  </style>
  <script src="https://www.youtube.com/iframe_api"></script>
</head>
<body>
<div class="video-item">
  <div class="yt-iframe-wrapper">
    <div id="playerBox">

    </div>
    <div class="cover-box">
      <a href="javascript:void(0)" class="play-btn" onclick="startPlay()"></a>
    </div>
  </div>
</div>
<button onclick="playFullscreen()">Play Full Screen</button>

<script type="text/javascript">
  //  var tag = document.createElement('script');
  //  tag.src = "https://www.youtube.com/iframe_api";
  //  var firstScriptTag = document.getElementsByTagName('script')[0];
  //  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  var  inNewsHunter = window.QualsonInterface || false;// 是否在News Hunter 客户端内
  /* 视频配置文件 */
  var vConfig = {
    ratio: "360:200",//视频宽高比
    width:360, //视频宽度
    height:200, //视频高度
    video:{
      //id: "M7lc1UVf-VE", //视频id
      id: "w8h1egZ1FHM",
      cover:"http://static.news.apuslauncher.com/upload/news/201705191515419c9f292c2b.png"//视频封面
    }
  }

  var player;
  function onYouTubeIframeAPIReady() {
    player = new YT.Player('playerBox', {
      width: '100%',
      height: '100%',
      videoId: vConfig.video.id,
      events: {
        'onReady': onPlayerReady,
        'onStateChange': onPlayerStateChange,
        'onPlaybackQualityChange': onPlayerPlaybackQualityChange,
        'onPlaybackRateChange': onPlayerPlaybackRateChange,
        'onError': onPlayerError,
        'onApiChange': onPlayerApiChange
      },
      playerVars: {
        'autoplay':0,// 是否自动播放 默认：0 否； 1 是
        'autohide': 1,//播放开始时 播放控制条是否自动隐藏 默认：1 是； 0 否
        'rel': 0,//播放结束时 是否显示相关视频 默认：1 是； 0 否
        'showinfo': 0,// 视频播放前是否显示视频标题和上传者信息 默认：1 是； 0 否
        'enablejsapi': 0,// 停用Javascript API 默认：0 否； 1 是
        'disablekb': 1,// 停用播放器键盘控件 默认：0 否； 1 是  (空格键：播放/暂停 向左箭头：当前视频后退10% 向右箭头：当前视频前进10% 向上箭头：调高音量 向下箭头：降低音量)
        'cc_lang_pref': 1,// ???
        'color': 'white',//  播放器 已播放部分颜色 可选红色(不写或其他非'white' 值)/白色('white') 默认红色
        'controls': 0,//此参数会指明视频播放器控件是否会显示  值：0、1或2。默认值为1
        'fs': 1,//：0或1。默认值为1，该值会使全屏按钮显示。将此参数设为0会阻止全屏按钮显示。
        'cc_load_policy': 1,// 是否显示字幕  将此值设为1会使系统在默认情况下显示字幕，即使在用户关闭字幕的情况下也是如此
        'modestbranding':1//播放控制条上是否显示 youtube图标 默认 0: 显示 ；1: 不显示；
        //'origin': 'https://www.youtube.com'
      }
    });
  }
  var palyerEvent = null;
  var iframe;
  var $ = document.querySelector.bind(document);
  // (1) 播放器准备就绪
  function onPlayerReady(event) {
    palyerEvent = event;
    iframe = $("#playerBox");
    onReady();
    //event.target.playVideo();

    // 测试 跳转到指定位置播放
    if(false){
      startPlay();
      setTimeout(function(){
        onVideoPause();
        onSeekTo(500);
      },5000);
    }

  }

  //(2) 播放状态 改变时
  function onPlayerStateChange(event) {
    console.log(event.data +" -- "+ YT.PlayerState.PLAYING);
    switch (event.data) {
      case YT.PlayerState.UNSTARTED:
        onStateChange("UNSTARTED");
        break;
      case YT.PlayerState.ENDED:
        onStateChange("ENDED");
        break;
      case YT.PlayerState.PLAYING:
        player.unloadModule("captions");
        onStateChange("PLAYING");
        timerId = setInterval(function () {
          if(player && player.getCurrentTime()){
            setCurrentSeconds(player.getCurrentTime());
          }
        }, 100);
        break;
      case YT.PlayerState.PAUSED:
        onStateChange("PAUSED");
        break;
      case YT.PlayerState.BUFFERING:
        onStateChange("BUFFERING");
        break;
      case YT.PlayerState.CUED:
        onStateChange("CUED");
        break;
    }

  }

  // (3) 视频清晰度切换时
  function onPlayerPlaybackQualityChange(playbackQuality) {
    onPlaybackQualityChange(playbackQuality);
  }

  // (4) 播放速率改变时触发
  function onPlayerPlaybackRateChange(playbackRate) {
    onPlaybackRateChange(playbackRate);
  }

  // (5) 视频加载错误时触发
  function onPlayerError(e) {
    onError(e);
  }

  // (6) 播放器已利用提供的API方法加载（或已取消加载）模块
  function onPlayerApiChange() {
    onApiChange('The player API changed');
  }


  /*================ 提供给客户端 调用的方法 start ================*/
  function startPlay(){
    //console.log(palyerEvent);
    if(!palyerEvent) return;
    onVideoPlay();
  }
  // 开始
  function onVideoPlay(){
    hideVideoCover();
    if(palyerEvent){
      palyerEvent.target.playVideo();
    }
  }

  // 停止
  function onVideoStop() {
    player.stopVideo();
  }

  // 暂停
  function onVideoPause() {
    console.log("onVideoPause");
    player.pauseVideo();
  }

  // 隐藏 视频封面
  function hideVideoCover(){
    if(videoCover){
      videoCover.style.display = "none";
    }
  }

  // 隐藏 视频封面
  function showVideoCover(){
    if(videoCover){
      videoCover.style.display = "block";
    }
  }

  // 音量设置
  function setVideoVolume(data){
    var volume = 30;
    if((data && parseInt(data)) || data == 0){
      volume = parseInt(data);
    }
    player.setVolume(volume);
  }

  // 跳转到指定播放时间
  function onSeekTo(startSeconds) {
    var toTime = 0;
    if((startSeconds && parseInt(startSeconds)) || startSeconds == 0){
      toTime = parseInt(startSeconds);
    }
    player.seekTo(toTime, true);
    startPlay();
  }

  // 客户端获取视频时长
  function sendDuration() {
    if(!inNewsHunter || !player)return;
    window.QualsonInterface.duration(player.getDuration());
  }

  // 加载指定视频
  function loadVideo(videoId, startSeconds) {
    var  startTime = startSeconds || 0;
    player.loadVideoById(videoId, startTime);
  }

  // 加载指定视频的 缩略图
  function cueVideo(videoId) {
    player.cueVideoById(videoId, 0, "large");//视频id 起始时间 视频质量
    player.setVolume(30);
  }

  // 改变视频清晰度
  function setVideoQuality(e) {
    var quality = "large";
    var startTime = 0;
    if(e){
      quality = e;
    }
    if(player && player.getCurrentTime){
      startTime = player.getCurrentTime();
    }
    player.loadVideoById(vConfig.video.id,startTime, quality)
  }

  // 隐藏 视频播放控制条 暂无
  function onHideControls() {
    setLog("onHideControls()");
  }


  //  全屏
  function playFullscreen (){
    //onVideoPause();
    if (document.requestFullScreen) {
      iframe.requestFullScreen()
    } else if (document.mozRequestFullScreen) {
      iframe.mozRequestFullScreen()
    } else if (document.webkitRequestFullScreen) {
      iframe.webkitRequestFullScreen()
    } else if (document.msRequestFullscreen) {
      iframe.msRequestFullscreen()
    } else if (document.oRequestFullscreen) {
      iframe.oRequestFullscreen()
    }
//    var requestFullScreen = iframe.requestFullScreen
//      || iframe.mozRequestFullScreen
//      || iframe.webkitRequestFullScreen;
//    if (requestFullScreen) {
//      requestFullScreen.bind(iframe)();
//    }
  }

  //  退出全屏
  function exitFullScreen(){
    if (document.exitFullscreen) {
      document.exitFullscreen();
    } else if (document.msExitFullscreen) {
      document.msExitFullscreen();
    } else if (document.mozCancelFullScreen) {
      document.mozCancelFullScreen();
    } else if(document.oRequestFullscreen){
      document.oCancelFullScreen();
    }else if (document.webkitExitFullscreen){
      document.webkitExitFullscreen();
    }else{
      document.IsFullScreen = false;
    }
  }
  /*================ 提供给客户端 调用的方法 end ================*/




  /******************** 调用客户端的方法 start ********************/
  // 视频准备就绪
  function onReady(e) {
    if(!inNewsHunter)return;
    window.QualsonInterface.onReady(e);
  }

  // 视频播放状态改变
  function onStateChange(e) {
    if(!inNewsHunter)return;
    window.QualsonInterface.onStateChange(e);
  }

  // 视频清晰度改变
  function onPlaybackQualityChange(e) {
    if(!inNewsHunter)return;
    window.QualsonInterface.onPlaybackQualityChange(e);
  }

  // 播放速率改变
  function onPlaybackRateChange(e) {
    if(!inNewsHunter)return;
    window.QualsonInterface.onPlaybackRateChange(e);
  }

  // 视频加载错误
  function onError(e) {
    if(!inNewsHunter)return;
    window.QualsonInterface.onError(e);
  }

  // API 状态发生改变时
  function onApiChange(e) {
    if(!inNewsHunter)return;
    window.QualsonInterface.onApiChange(e);
  }

  // 当前时间返回给客户端
  function setCurrentSeconds(nowTime) {
    if(!inNewsHunter)return;
    window.QualsonInterface.currentSeconds(nowTime);
  }

  // 客户端打印信息
  function setLog(msg) {
    if(!inNewsHunter)return;
    window.QualsonInterface.logs(msg);
  }
  /******************** 调用客户端的方法 end ********************/

  /* 原生js 工具函数 */
  function getElementsByClass(sClass){
    var aResult=[];
    var aEle=document.all ? document.all : document.getElementsByTagName('*');
    for(var i=0;i<aEle.length;i++){
      /*当className相等时添加到数组中*/
      if(aEle[i].className==sClass){
        aResult.push(aEle[i]);
      }
    }
    return aResult;
  };
  /* 1. hasClass 实现*/
  Object.prototype.hasClass=function(cl){
    return this.className.match(new RegExp('(\\s|^)'+cl+'(\\s|$)'))==null ? false : true;
  }
  /* 2. addClass 实现*/
  Object.prototype.addClass=function(cl){
    if(!this.hasClass(cl)){ this.className += ' '+cl; }
  }
  /* 3. removeClass 实现*/
  Object.prototype.removeClass=function(cl){
    var reg = new RegExp("(^|\\s)"+cl+"(\\s|$)");
    if(this.hasClass(cl)){this.className = this.className.replace(reg,"");}
  }
  var videoCover = null;
  if(true){
    var iFrameWrappers = getElementsByClass("yt-iframe-wrapper");
    var windowWidth = document.documentElement.clientWidth;
    for(var i=0; i<iFrameWrappers.length; i++){
      iFrameWrappers[i].style.height=vConfig.height*windowWidth/vConfig.width+"px";
    }
    var coverBox = getElementsByClass("cover-box");
    if(coverBox[0]){
      videoCover = coverBox[0];
      videoCover.style.background = 'url("'+vConfig.video.cover+'")';
    }
  }


</script>
</body>
</html>
